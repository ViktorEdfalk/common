<!--

    Copyright (C) 2013 Inera AB (http://www.inera.se)

    This file is part of Inera Certificate Modules (http://code.google.com/p/inera-certificate-modules).

    Inera Certificate Modules is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    Inera Certificate Modules is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->
<div class="row-fluid">

  <!-- Loading spinner: visibility defined by $scope.doneLoading  -->
  <div ng-hide="doneLoading" style="text-align: center; padding: 20px;">
    <img src="/img/ajax-loader.gif" style="text-align: center;" />
    <p style="text-align: center; color: #64ABC0; margin-top: 20px;">
      <strong><message key="ts-bas.message.certifits-basloading" /></strong>
    </p>
  </div>

  <div ng-show="doneLoading">
  
    <div id="backnav" class="row-fluid col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <a class="backlink" href="/web/start"><message key="button.goback" /></a>
    </div>



<!--     Content -->

    <div class="row-fluid">
      <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
        <h1>
          <message key="ts-bas.label.pagetitle" />
        </h1>
        <p>
          <message key="ts-bas.label.pagedescription" />
        </p>
        <form id="view-as-pdf" action="{{downloadAsPdfLink}}" method="get" target="_blank" name="pdfForm">
          <p class="btn-row">
            <button type="button" ng-click="open()" class="btn btn-success">
              <message key="button.send" />
            </button>
            <button id="downloadprint" type="submit" onClick="document.pdfForm.submit()" class="btn btn-inverse">
              <message key="button.downloadprint" />
            </button>
          </p>
        </form>
      </div>
      <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 eventbox">
        <h2>
          <span message key="ts-bas.label.latestevent"></span>
        </h2>
<!--          Show if no events to show -->
        <p ng-show="!cert.status">
          <span message key="ts-bas.label.latestevent.noevents"></span></a>
        </p>

<!--         Show first status in list if any viable status exist -->
        <p id="lastest-certificate-event" ng-show="cert.status.length>0">
          {{cert.status[0].timestamp | date:'shortDate'}} <span message key="ts-bas.status.{{cert.status[0].type}}"></span> <span message
            key="ts-bas.target.{{cert.status[0].target}}"></span>
        </p>
<!--         Show if more than 1 viable status exists -->
        <p ng-show="cert.status.length>1">
          <a class="statusHistoryLink" href ng-click="showStatusHistory()"><span message key="ts-bas.label.latestevent.showall"></span></a>
        </p>
      </div>
    </div>
    <section id="certificate" class="certificate">
      <span class="hide" id="certId" title="{{cert.id}}"></span> <span class="hide" id="certType" title="{{cert.typ}}"></span>
      <div class="row-fluid">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <div class="cert">
            <div class="cert-titlebar">
              <img class="cert-icon" alt="" ng-src="/web/webjars/ts-bas/intyg/img/ts-bas.png" />
              <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                  <h2>
                    <span class="cert-title"><message key="ts-bas.label.certtitle" /></span>
                  </h2>
                </div>
                <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 issue">
                  <span><message key="ts-bas.label.issued" /></span> <span class="cert-titlebar-value">{{cert.signeringsdatum | date:'longDate'}}</span>
                </div>
<!--                 <div class="span1 archive"> -->
<!--                   <a href="#archiveModal" role="button" data-toggle="modal" onclick="return false"><img alt="Arkivera intyg" src="/img/archive-icon.gif" /></a> -->
<!--                 </div> -->
              </div>
            </div>
            <div class="cert-header">
              <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                  <span class="tag"><message key="ts-bas.label.patientname" /></span> <span id="patient-name">{{cert.patient.fullstandigtNamn}}</span>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                  <span class="tag"><message key="ts-bas.label.civicnumber" /></span> <span id="patient-crn">{{cert.patient.personid}}</span>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xs-offset-6 col-sm-offset-6 col-md-offset-6 col-lg-offset-6 margin-top-5px">
                  <span class="tag"><message key="ts-bas.label.identitet" /></span> <span id="patient-crn">{{cert.vardkontakt.idkontroll}}</span>
                </div>
              </div>
              <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                  <span class="tag"><message key="ts-bas.label.unit" /></span> <span id="careunit">{{cert.skapadAv.vardenhet.enhetsnamn}}</span>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                  <span class="tag"><message key="ts-bas.label.issuer" /></span> <span id="caregiver">{{cert.skapadAv.vardenhet.vardgivare.vardgivarnamn}}</span>
                </div>
              </div>
              <div class="row">
              	<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                  <span class="tag"><message key="ts-bas.label.intygavser" /></span> <span id="caregiver">{{cert.intygAvser}}</span>
                </div>
              </div>
            </div>
            
            <div class="table-bottom"></div>
            
            <div class="cert-body">
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.synfunktioner">{{ts-bas.label.synfunktioner}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.horselbalans">{{ts-bas.label.horselbalans}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.funktionsnedsattning">{{ts-bas.label.funktionsnedsattning}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.hjartkarl">{{ts-bas.label.hjartkarl}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.diabetes">{{ts-bas.label.diabetes}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.neurologi">{{ts-bas.label.neurologi}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.medvetandestorning">{{ts-bas.label.medvetandestorning}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.njurar">{{ts-bas.label.njurar}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.kognitivt">{{ts-bas.label.kognitivt}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.somnvakenhet">{{ts-bas.label.somnvakenhet}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.narkotikalakemedel">{{ts-bas.label.narkotikalakemedel}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.psykiskt">{{ts-bas.label.psykiskt}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.utvecklingsstorning">{{ts-bas.label.utvecklingsstorning}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.sjukhusvard">{{ts-bas.label.sjukhusvard}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.medicinering">{{ts-bas.label.medicinering}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.ovrigkommentar">{{ts-bas.label.ovrigkommentar}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				FÄLTDATA HÄR
            			</span>
            		</span>	
            	</div>
            	<div class="body-row">
            		<h3 class="title">
            			<span message key="ts-bas.label.bedomning">{{ts-bas.label.bedomning}}</span>
            			<span>
            				<span></span>
            			</span>
            		</h3>
            		<span class="text">
            			<span>
            				<span class="text" message key="ts-bas-bedomning-info-alt-1">{{ts-bas-bedomning-info-alt-1}}</span><br/>
            				<span>{{cert.bedomning}}</span><br/>
            				<span class="text">{{ts-bas-bedomning-info-alt-2}}</span><br/>
            				<span class="text" message key="ts-bas-bedomning-info-undersokas-med-specialkompetens"><b>{{ts-bas-bedomning-info-undersokas-med-specialkompetens}}</b></span><br/>
            				<span class="text" message key="ts-bas-bedomning-info-ej-angivet">{{ts-bas-bedomning-info-ej-angivet}}</span>
            			</span>
            		</span>	
            	</div>
            	
            	<div class="row">
            		<div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
            			<div class="infobox">
            				<h3><span message key="ts-bas.label.confirmedby">{{ts-bas.label.confirmedby}}</span></h3>
            				<h4><span message key="ts-bas.label.date">{{ts-bas.label.date}}</span></h4>
            				<p>{{cert.signeringsdatum | date:'longDate'}}</p>
            				<h4><span message key="ts-bas.label.contactinfo"></span></h4>
            				<p>
            					<span id="physician-name-id" class="text">{{cert.skapadAv.fullstandigtNamn}} ({{cert.skapadAv.personid}})</span><br/>
            					<span id="caregiver-name-id" class="text">{{cert.skapadAv.vardenhet.vardgivare.vardgivarnamn}} ({{cert.skapadAv.vardenhet.vardgivare.vardgivarid}})</span><br/>
            					<span id="careunit-name-id" class="text">{{cert.skapadAv.vardenhet.enhetsnamn}} ({{cert.skapadAv.vardenhet.enhetsid}})</span><br/>
            					<span id="careunit-postal_address" class="text">{{cert.skapadAv.vardenhet.postadress}}, {{cert.skapadAv.vardenhet.postnummer}} {{cert.skapadAv.vardenhet.postort}}</span>
            					<span id="careunit-postal_phone" class="text">{{cert.skapadAv.vardenhet.telefonnummer}}, {{cert.skapadAv.vardenhet.telefonnummer}}</span>
            				</p>
            			</div>
            		</div>
            	</div>
            </div>
          </div>
        </div>     
      </div>
    </section>
  </div>

</div>
