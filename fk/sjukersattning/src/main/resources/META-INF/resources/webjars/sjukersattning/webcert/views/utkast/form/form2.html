
<div ng-form="form2">
  <a id="anchor.grundformu" name="anchor.grundformu"></a>
    <h3 class="title">Läkarutlåtande för sjukersättning</h3>
  <div id="grundformu" wc-field field-dynamic-label="KAT_2.RBK"
                                      field-dynamic-help-text="KAT_2.HLP"
       field-has-errors="viewState.common.validationMessagesGrouped.grundformu" class="field-fade">
  <div class="alert alert-danger" ng-if="viewState.common.validationMessagesGrouped.grundformu" id="validationMessages_grundformu">
    <ul>
      <li ng-repeat="message in viewState.common.validationMessagesGrouped.grundformu"><span message
                                                                                key="{{message.message}}"></span>
      </li>
    </ul>
  </div>

  <div class="form-group form-inline" ng-repeat="grundForMUdate in grundForMUdates">
    <label class="checkbox inline-block" style="min-width: 300px">
      <input type="checkbox"
             id="grundForMUdate-{{grundForMUdate}}"
             class="checkbox-inline"
             ng-model="grundForMUState.check[grundForMUdate]"
             ng-change="toggleBaseradPaDate(grundForMUdate)"
             value="true">
      <span message key="sjukersattning.label.grund-for-mu-date.{{grundForMUdate}}"></span>
    </label>
    <span wc-date-picker-field target-model="dates[grundForMUdate]"
          dom-id="{{grundForMUdate}}Date"></span>
  </div>

  <!--  Jag har känt patienten sedan den -->
  <div class="form-group form-inline">
      <label class="checkbox inline-block" style="min-width: 300px; ">
          <span>Jag har känt patienten sedan den</span></label>
      <span wc-date-picker-field target-model="model.kannedomOmPatient" dom-id="kannedomOmPatientDate"></span>


  </div>
      <p>

      <div class="alert alert-danger" ng-if="viewState.common.validationMessagesGrouped.underlag" id="validationMessages_underlag">
          <ul>
              <li ng-repeat="message in viewState.common.validationMessagesGrouped.underlag"><span message
                                                                                                     key="{{message.message}}"></span>
              </li>
          </ul>
      </div>

      <!--  Finns det andra medicinska... -->
      <div class="form-group form-inline">
          <label class="inline-block bold">Finns det andra medicinska utredningar eller underlag som är relevanta för bedömningen?</label>
      </div>
      <div class="form-group form-inline">
          <label class="radio-inline">
                <input id="andraMedicinskaUtredningarYes" name="andraMedicinskaUtredningar" type="radio" ng-value="true"
                        ng-model="model.underlagFinns" />Ja
          </label>
          <label class="radio-inline">
              <input id="andraMedicinskaUtredningarNo" name="andraMedicinskaUtredningar" type="radio" ng-value="false"
                     ng-model="model.underlagFinns" checked="checked" />Nej
          </label>
      </div>

     <div class="form-group form-inline bottom-padding-small" ng-show="model.underlagFinns"  style="padding-bottom: 40px;">
         <div class="underlagItem" style="padding-bottom: 10px;" ng-repeat="underlag in viewModel.initialUnderlag">
              <span class="glyphicon glyphicon-remove-sign deleteUnderlag" ng-click="removeUnderlag(underlag.typ, $index)"></span>
              <select class="form-control" name="andraUnderlag"
                    data-ng-model="underlag.typ" ng-change="onUnderlagChange(underlag, $index)"
                    data-ng-options="item.id as item.label for item in $parent.underlagSelect"></select>

              <span wc-date-picker-field target-model="underlag.datum" dom-id="{{ underlag.typ }}-Date"
                    ng-change="onUnderlagChange(underlag, $index)" ng-model="underlag.datum"></span>

              <div class="willSupplyWrapper pull-right">
              <label class="control-label inline-block bold" style="padding-right: 10px;">Skickas separat</label>
              <label class="radio-inline">
                  <input id="willSupplyAttachmentYES-{{ $index }}" name="willSupplyAttachmentRadioYes{{ $index }}"
                         type="radio" ng-value="true" ng-change="onUnderlagChange(underlag, $index)" ng-model="underlag.bilaga" />Ja
              </label>
              <label class="radio-inline">
                  <input id="willSupplyAttachmentNO-{{ $index }}" name="willSupplyAttachmentRadioNo{{ $index }}"
                         type="radio" ng-value="false" ng-change="onUnderlagChange(underlag, $index)" ng-model="underlag.bilaga" />Nej
              </label>
          </div>
             <br/>
         </div>
         <div class="col-xs-12" style="padding: 5px 0px;background-color: #e5e5e5; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;"
              ng-show="model.underlag.length < 9">
             <a href ng-click="createUnderlag()" class="btn btn-link"
                ng-class="{ 'disabled': viewModel.initialUnderlag[viewModel.initialUnderlag.length - 1].typ === 0 ||
                                        viewModel.initialUnderlag[viewModel.initialUnderlag.length - 1].datum === null }">
                 Lägg till ytterligare underlag</a>
         </div>
         <span ng-if="model.underlag.length === 9" message key="sjukersattning.validation.underlag.max-extra-underlag"></span><!-- kursivera -->
     </div>



  </div>
</div>