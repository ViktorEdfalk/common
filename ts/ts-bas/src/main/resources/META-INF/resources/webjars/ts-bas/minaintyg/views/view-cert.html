<!--

    Copyright (C) 2013 Inera AB (http://www.inera.se)

    This file is part of Inera Certificate Modules (http://code.google.com/p/inera-certificate-modules).

    Inera Certificate Modules is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    Inera Certificate Modules is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->
<mi-page-head>
  <mi-breadcrumb></mi-breadcrumb>
  <!-- Content -->
  <div class="row">
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-7 mi-text">
      <h1>
        <message id="viewCertificateHeader" key="ts-bas.label.pagetitle" />
      </h1>
      <p></p>
      <div class="mi-text" message key="ts-bas.label.pageingress"></div>
      <div uib-collapse="!isCollapsed1" class="collapse mi-text">
        <div message key="ts-bas.label.pagedescription.sendcertificate.header"></div>
        <div message key="ts-bas.label.pagedescription.sendcertificate"></div>
        <div message key="ts-bas.label.pagedescription.save.or.print.certificate.header"></div>
        <div message key="ts-bas.label.pagedescription.save.or.print.certificate"></div>
        <a class="glyphicon glyphicon-question-sign more-info" ng-click="isCollapsedPDF = !isCollapsedPDF"
           title="{{messageService.getProperty('common.title.helptext.moreinfo')}}"></a>
        <div uib-collapse="!isCollapsedPDF" class="well well-sm margin-top-5px"><span message
                                                                                      key="ts-bas.helptext.readpdfhelp"></span>
        </div>
        <div message key="ts-bas.label.pagedescription.error.in.certificate.header"></div>
        <div message key="ts-bas.label.pagedescription.error.in.certificate"></div>
        <div message key="ts-bas.label.pagedescription.archive.header"></div>
        <div message key="ts-bas.label.pagedescription.archive"></div>
      </div>
      <br>
      <button type="button" ng-click="isCollapsed1 = !isCollapsed1" class="btn-link btn-link-link margin-top-5px"
              data-toggle="collapse">
        <span message key="ts-bas.label.status.{{!isCollapsed1}}"></span>
      </button>
    </div>
    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
      <latest-events cert-id="{{cert.id}}" statuses="cert.status"></latest-events>
    </div>
  </div>
</mi-page-head>
<div class="container">
  <div class="row-fluid">

    <!-- Loading spinner: visibility defined by $scope.doneLoading  -->
    <div mi-spinner label="ts-bas.message.certificateloading" show-spinner="!doneLoading" show-content="doneLoading">

      <mi-certificate-action-buttons cert-model="cert" on-send="send(cert)" enable-archive="true"
                                     enable-print="true"></mi-certificate-action-buttons>

      <mi-compact-certificate-header cert-meta-model="certMeta"></mi-compact-certificate-header>
      <mi-compact-certificate-body cert-meta-model="certMeta"></mi-compact-certificate-body>
      <uv-render-components config="uvConfig" view-data="cert"></uv-render-components>

    </div>
  </div>
</div>
