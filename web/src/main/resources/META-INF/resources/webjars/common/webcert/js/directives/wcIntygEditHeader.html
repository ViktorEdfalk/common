<div>
  <div wc-print-header title-id="{{certMeta.intygType}}.label.certtitle" print-message-id="print.label.draft" intygs-id="cert.id"></div>
  <div class="print-show">
    <label class="control-label">{{cert.grundData.patient.fullstandigtNamn}} - {{cert.grundData.patient.personId}}</label>
  </div>

  <div class="header-fix-top print-hide">
    <div class="header-wrapper" ng-hide="viewState.collapsedHeader" ng-animate="'menucollapse'">
      <div id="wcHeader" wc-header default-active="index"></div>
    </div>

    <div ng-hide="viewState.activeErrorMessageKey">
      <div wc-spinner label="info.loadingdata" show-spinner="!viewState.doneLoading"
           show-content="viewState.doneLoading">

        <div class="header-fix-panel">
          <div class="header-fix-top-expand">
            <div class="header-fix-top-expand-wrapper">
              <button class="btn btn-link" ng-click="toggleHeader()"><span
                  ng-if="viewState.collapsedHeader">Visa</span><span
                  ng-if="!viewState.collapsedHeader">Dölj</span> meny
              </button>
            </div>
          </div>
          <a id="tillbakaButton" wc-feature-not-active feature="franJournalsystem" class="backlink-icon"
             href="/web/dashboard#/create/choose-cert-type/index" title="Tillbaka till Skriv intyg"></a>
          <h1 style="display: inline-block; margin-right: 20px;">
            <span message key="{{certMeta.intygType}}.label.certtitle"></span>
          </h1>

          <div class="inline-block">
            <label class="control-label" id="patientNamnPersonnummer">{{cert.grundData.patient.fullstandigtNamn}} -
              {{cert.grundData.patient.personId}}</label>
          </div>

          <div wc-new-person-id-message></div>

          <div class="form-group buttonbar">
            <button id="spara-utkast" class="btn btn-info" ng-click="save()" ng-if="!isSigned"
                    ng-disabled="!certForm.$dirty" title="Sparar intyget som ett utkast.">
              <span message key="{{certMeta.intygType}}.label.spara-utkast"></span>
            </button>
            <button id="ta-bort-utkast" class="btn btn-default btn-secondary" ng-if="!isSigned" ng-click="discard()"
                    title="Klicka på papperskorgen för att radera utkastet.">
              <i class="glyphicon glyphicon-trash"></i>
            </button>
            <button id="skriv-ut-utkast" class="btn btn-default btn-secondary" ng-if="!isSigned" ng-click="print()"
                    title="Skriver ut utkastet.">
              <span message key="{{certMeta.intygType}}.label.skriv-ut-utkast"></span>
            </button>
            <button class="btn btn-default btn-secondary" ng-if="!viewState.showComplete" ng-disabled="isComplete"
                    ng-click="toggleShowComplete()" id="showCompleteButton"
                    title="Visar vilka obligatoriska fält i utkastet som inte är ifyllda. Alla obligatoriska fält måste vara ifyllda för att utkastet ska kunna signeras.">
              Visa vad som saknas
            </button>
            <button class="btn btn-default btn-secondary" ng-if="viewState.showComplete" ng-disabled="isComplete"
                    ng-click="toggleShowComplete()"  id="hideCompleteButton"
                    title="Visar vilka obligatoriska fält i utkastet som inte är ifyllda. Alla obligatoriska fält måste vara ifyllda för att utkastet ska kunna signeras.">
              Dölj vad som saknas
            </button>
          </div>

          <!-- Show save errors here to spare user from retyping everything for intermittent errors -->
          <div class="row">
            <div ng-show="viewState.error.saveErrorMessageKey != null" class="col-md-7">
              <div class="alert alert-danger">
                <span message key="{{viewState.error.saveErrorMessageKey}}"></span>
              </div>
            </div>
          </div>

          <!-- Just in case -->
          <div id="certificate-is-sent-to-it-message-text" ng-show="isSigned">
            <span message key="draft.status.signed"></span>
          </div>
          <!-- complete -->
          <div ng-show="certForm.$pristine && isComplete && !isSigned">
            <span id="intyget-sparat-meddelande" message key="draft.status.draft_complete"></span>
          </div>
          <!-- incomplete -->
          <div ng-show="certForm.$pristine && !isComplete">
            <span id="intyget-ej-komplett-meddelande" message key="draft.status.draft_incomplete"></span>
          </div>
          <!-- form changed -->
          <div ng-show="certForm.$dirty"><span message key="draft.status.changed"></span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Total fail error messages -->
  <div id="error-panel" class="cert-error-panel"
       ng-show="viewState.doneLoading && viewState.activeErrorMessageKey && !viewState.deleted">
    <div class="alert alert-danger">
      <span message key="{{viewState.activeErrorMessageKey}}"></span>
    </div>
  </div>

  <ul>
    <li ng-repeat="message in validationMessages">
      <span message key="{{message.message}}"></span></li>
  </ul>

  <!-- intygeditheader end -->
</div>