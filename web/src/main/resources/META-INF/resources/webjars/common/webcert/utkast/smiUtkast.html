<!-- Utkastheader -->
<div ui-view="header"></div>

<div class="webcert-workarea-hflex-container centered-constrained-content" id="edit-{{viewState.common.intyg.type}}">

  <div class="bottom-fadeout-gradient wc-color-27">
    <div></div>
  </div>

  <div id="certificate-content-container" class="webcert-workarea-intyg container-fluid edit-form">

    <div ng-if="!editEnabled">
      <div ng-if="viewState.common.previousIntyg[viewState.common.intyg.type] && !viewState.common.previousUtkast[viewState.common.intyg.type]">
        <wc-alert-message alert-id="intyg-previousintyg-warning-{{viewState.common.intyg.type}}" alert-severity="info" ng-switch="viewState.common.previousIntyg[viewState.common.intyg.type].sameVardgivare">
          <span ng-switch-when="true" dynamic-label key="{{viewState.common.intyg.type}}.warn.previouscertificate.samevg"></span>
          <span ng-switch-when="false" dynamic-label key="{{viewState.common.intyg.type}}.warn.previouscertificate.differentvg"></span>
        </wc-alert-message>
      </div>

      <div ng-if="viewState.common.previousUtkast[viewState.common.intyg.type]">
        <wc-alert-message alert-id="intyg-previousutkast-warning-{{viewState.common.intyg.type}}" alert-severity="info" ng-switch="viewState.common.previousUtkast[viewState.common.intyg.type].sameVardgivare">
          <span ng-switch-when="true" dynamic-label key="{{viewState.common.intyg.type}}.warn.previousdraft.samevg"></span>
          <span ng-switch-when="false" dynamic-label key="{{viewState.common.intyg.type}}.warn.previousdraft.differentvg"></span>
        </wc-alert-message>
      </div>
    </div>


    <form name="certForm" novalidate autocomplete="off" wc-auto-save="editEnabled" class="ng-animate-disabled">
      <fieldset ng-disabled="!editEnabled">
        <div ng-hide="viewState.common.error.activeErrorMessageKey || viewState.common.deleted">

          <wc-spinner label="info.loadingintyg" show-spinner="!viewState.common.doneLoading">

            <div id="certificate" class="row certificate">
              <div class="col-md-12 intyg-body">

                <wc-intyg-has-komplettering-message></wc-intyg-has-komplettering-message>

                <div ui-view="utkast" />

              </div>
              <!-- intyg body -->

            </div>
            <!-- certificate -->

            <div ng-if="editEnabled">

              <wc-utkast-error-summary
                  categories="viewState.common.validation.sections"
                  category-ids="categoryIds">
              </wc-utkast-error-summary>

              <div ui-view="footer"></div>

            </div>

          </wc-spinner>
        </div>
      </fieldset>
    </form>
  </div>

  <div class="webcert-workarea-supportpanel" ng-if="::supportPanelConfig" ng-hide="viewState.common.deleted">
    <wc-support-panel-manager config="supportPanelConfig"></wc-support-panel-manager>
  </div>

</div>
