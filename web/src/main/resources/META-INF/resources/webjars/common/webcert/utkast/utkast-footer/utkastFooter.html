<div ng-if="!isSigned" class="print-hide">

  <h3><span message key="common.sign.intyg"></span></h3>

  <div id="sign-requires-doctor-message-text" wc-authority="!SIGNERA_INTYG" class="alert alert-info">
    <span message key="draft.onlydoctorscansign"></span>
  </div>

  <div wc-authority="!SIGNERA_INTYG, VIDAREBEFORDRA_UTKAST">
    <p>
      <span message key="draft.notifydoctor"></span>
    </p>
    <div class="form-group">
      <button id="vidarebefordraEjHanterad" class="btn"
              ng-class="{'btn-info': !viewState.draftModel.vidarebefordrad, 'btn-default btn-secondary' : viewState.draftModel.vidarebefordrad}"
              title="Skicka mejl med en länk till utkastet för att informera den läkare som ska signera det."
              ng-click="vidarebefordraUtkast()">
        <img ng-if="!viewState.draftModel.vidarebefordrad" src="/img/mail.png"> <img ng-if="viewState.draftModel.vidarebefordrad"
                                                                                     src="/img/mail_dark.png">
      </button>
    </div>

    <div class="body-row">
      <label for="mark-as-vidarebefordrad">
        <input id="mark-as-vidarebefordrad" type="checkbox"
               ng-disabled="viewState.common.vidarebefordraInProgress" ng-model="viewState.draftModel.vidarebefordrad"
               ng-change="onVidarebefordradChange()" /> Vidarebefordrad
      </label> <span ng-if="viewState.common.vidarebefordraInProgress"> <img
        src="/img/ajax-loader-kit-16x16.gif"></span>
    </div>
  </div>

  <button id="signera-utkast-button" class="btn btn-success"
          wc-authority="SIGNERA_INTYG"
          ng-disabled="!viewState.common.intyg.isComplete || certForm.$dirty || signingWithSITHSInProgress"
          ng-click="sign()"><img ng-show="signingWithSITHSInProgress" ng-src="/img/ajax-loader-small-green.gif"/> <span message key="common.sign"></span>
  </button>

</div>