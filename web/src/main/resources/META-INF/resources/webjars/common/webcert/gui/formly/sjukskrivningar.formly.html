<div wc-date-period-manager model="model" class="sjukskrivningar">
  <label class="">
    <span dynamic-label key="{{to.label}}.RBK"></span>
  </label>

  <div class="sjukskrivningar-section">
    <span dynamic-label key="{{to.label}}.HLP"></span>
  </div>

  <div class="formly-field form-inline row">
    <div class="col-md-12">
      <label>
        <span message key="common.sit.label.sjukskrivning.hoursperweek"></span>
        <input class="form-control hoursPerWeek" type="text" ng-model="viewstate.hoursPerWeek"  ng-change="viewstate.updateHoursPerWeek()"> h/vecka
        <span wc-help-mark field-help-text="common.sit.help.sjukskrivning.hoursperweek"></span>
      </label>
    </div>
  </div>

  <wc-validation-group field-type="{{to.type}}"
                       validations="formState.viewState.common.validationMessagesByField[options.key]"
                       kompletteringar="hasKompletteringar()">
    <div class="form-horizontal" data-ng-repeat="field in to.fields">

      <wc-validation-wrapper field-type="date-period" validations="getValidationsForPeriod(field)">
        <div class="col-md-3">
          <div class="form-group">
            <label class="big-checkbox-label checkbox-inline">
              <input class="big-checkbox" type="checkbox" ng-model="viewstate.periods[field].checked" ng-change="viewstate.updateCheckBox(field)">
              <span dynamic-label key="{{to.code}}.{{field}}.RBK"></span>
            </label>
            <span wc-help-mark field-dynamic-help-text="{{to.code}}.{{field}}.HLP"></span>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="{{options.key}}-{{field}}-from">från och med</label>
            <span wc-date-period-field model="model" field="{{options.key}}" index="{{field}}" type="from"></span>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="{{options.key}}-{{field}}-tom">till och med</label>
            <span wc-date-period-field model="model" field="{{options.key}}" index="{{field}}" type="tom"></span>
          </div>
        </div>
      </wc-validation-wrapper>

      <div class="fold-animation fold-slide-animation" ng-if="viewstate.periods[field].valid">
        <div class="row">
          <div class="col-md-12 sjukskrivningar-section">
            Arbetstid: {{viewstate.periods[field].hoursPerWeek | number : 2}} timmar/vecka i {{viewstate.periods[field].days}} dagar.
          </div>
        </div>
      </div>

    </div>

    <wc-field-komplettering key="{{options.key}}" komplettering-key="{{to.kompletteringKey}}"></wc-field-komplettering>

    <div ng-if="viewstate.totalDays" class="fold-animation fold-slide-animation">
      Intyget motsvarar en period på {{viewstate.totalDays}} dagar.
    </div>

  </wc-validation-group>

</div>