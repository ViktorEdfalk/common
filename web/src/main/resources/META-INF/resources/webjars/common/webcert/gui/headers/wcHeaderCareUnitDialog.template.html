<div class="modal-header">
  <button class="close" data-ng-click="close()">×</button>
  <h3>Välj vårdenhet eller arbetsplats att logga in på</h3>
</div>
<div class="modal-body">
  <div ng-repeat="vg in vardgivare | orderBy:'namn'">
    <div class="row">
      <div class="col-xs-5 col-xs-offset-1"><strong>{{vg.namn}}</strong></div>
      <div class="col-xs-3" wc-feature-active feature="hanteraFragor"><strong>Ej hanterade frågor och svar</strong></div>
      <div class="col-xs-3" wc-feature-active feature="hanteraIntygsutkast"><strong>Ej signerade utkast</strong></div>
    </div>
    <div ng-repeat="enhet in vg.vardenheter | orderBy:'namn'">
      <div class="row">
        <div class="col-xs-1">
          <button class="close wc-pull-left"
               id="expand-enhet-{{enhet.id}}"
               style="float:left;"
               ng-if="enhet.mottagningar.length > 0"
               ng-click="toggle(enhet)">
            <span class="glyphicon"
                  ng-class="enhet.showMottagning ? 'glyphicon-minus' : 'glyphicon-plus'">
            </span>
          </button>
        </div>
        <div class="col-xs-5">
          <button id="select-active-unit-{{enhet.id}}-modal"
                  class="btn btn-link"
                  data-ng-click="selectVardenhet(enhet)">
            {{enhet.namn}}
          </button>
        </div>
        <div class="col-xs-3 enhet-stat"
             id="fraga-svar-stat-{{enhet.id}}">
          {{ findFragaSvar(vg.id, enhet.id) }} ({{ findAllFragaSvar(vg.id, enhet.id) }})
        </div>
        <div class="col-xs-3 enhet-stat"
             id="intyg-stat-{{enhet.id}}">
          {{ findIntyg(vg.id, enhet.id) }} ({{ findAllIntyg(vg.id, enhet.id) }})
        </div>
      </div>
      <div ng-show="enhet.showMottagning">
        <div class="row" ng-repeat="mottagning in enhet.mottagningar | orderBy:'namn'">
          <div class="col-xs-5 col-xs-offset-1">
            <button id="select-active-unit-{{mottagning.id}}-modal"
                    class="btn btn-link mottagning-button"
                    data-ng-click="selectVardenhet(mottagning)">
              {{mottagning.namn}}
            </button>
          </div>
          <div class="col-xs-3 enhet-stat"
               id="fraga-svar-stat-{{mottagning.id}}">
            {{ findFragaSvar(vg.id, mottagning.id) }}
          </div>
          <div class="col-xs-3 enhet-stat"
               id="intyg-stat-{{mottagning.id}}">
            {{ findIntyg(vg.id, mottagning.id) }}
          </div>
        </div>
      </div>
    </div>
    <hr />
  </div>
  <div class="alert alert-danger" ng-show="error">Tekniskt fel. Kunde inte byta vårdenhet.</div>
</div>
