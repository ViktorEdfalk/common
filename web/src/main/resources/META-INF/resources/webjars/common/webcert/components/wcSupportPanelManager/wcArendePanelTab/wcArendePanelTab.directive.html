<div class="tab-content-title-row">

  <ul class="nav navbar-nav" ng-if="viewState.intygProperties.isSent">
    <li ng-class="{active: isFilterKomplettering}">
      <a ng-click="isFilterKomplettering=true" id="arende-filter-kompletteringsbegaran">
        Kompletteringsbegäran
        <span id="arende-kompletteringsbegaran-count" class="badge badge__stat" ng-show="unhandledKompletteringCount > 0">
          {{unhandledKompletteringCount}}
        </span>
      </a>
    </li>
    <li ng-class="{active: !isFilterKomplettering}">
      <a ng-click="isFilterKomplettering=false" id="arende-filter-administrativafragor">
        Administrativa frågor
        <span id="arende-administrativafragor-count" class="badge badge__stat" ng-show="unhandledAdministrativaFragorCount > 0">
          {{unhandledAdministrativaFragorCount}}
        </span>
      </a>
    </li>
  </ul>

</div>

<wc-support-panel-scrollable-body dom-id="arende-panel-scrollable-body">

  <div class="row">
    <div class="col-md-12 arende-column">

      <wc-deprecated-intygstype-message message-suffix="arendeheader" intygs-type="{{::viewState.intygProperties.type}}"></wc-deprecated-intygstype-message>

      <div wc-spinner label="common.loading.existing.arenden" show-spinner="!viewState.doneLoading">

        <!-- error message -->
        <wc-alert-message id="arende-list-load-error"
                          ng-show="viewState.intygProperties.isLoaded && viewState.doneLoading && viewState.activeErrorMessageKey" alert-severity="danger">
          <span dynamic-label key="common.error.{{viewState.activeErrorMessageKey}}"></span>
        </wc-alert-message>

        <wc-arende-intyg-not-sent-message ng-if="!viewState.intygProperties.isSent"></wc-arende-intyg-not-sent-message>

        <div id="arende-kompletteringar-section" class="arende-list-section" ng-show="isFilterKomplettering">

          <wc-arende-komplettera-utkast-warning ng-if="config.intygContext.isSigned"></wc-arende-komplettera-utkast-warning>

          <!-- list of komplettering arenden -->
          <div ng-repeat="arendeListItem in arendeList | filter:kompletteringarFilter | orderBy:'+senasteHandelse' as kompletteringarList"
               class="arende-item">
            <arende-panel panel-id="kompletteringar" arende-list-item="arendeListItem" arende-list="arendeList"
                 parent-view-state="viewState"></arende-panel>
          </div>
        </div>

        <div id="arende-administrativafragor-section" class="arende-list-section" ng-show="!isFilterKomplettering">

          <!-- new arende form -->
          <arende-new ng-show="config.intygContext.isSigned && viewState.doneLoading && viewState.activeErrorMessageKey == null"
               arende-list="arendeList" parent-view-state="viewState"></arende-new>

          <!-- list of administrativ fraga arenden -->
          <div
              ng-repeat="arendeListItem in arendeList | filter:administrativaFragorFilter | orderBy:'+senasteHandelse' as administrativaFragorList"
              class="arende-item">
            <arende-panel panel-id="administrativaFragor" arende-list-item="arendeListItem" arende-list="arendeList"
                 parent-view-state="viewState"></arende-panel>
          </div>

        </div>

      </div>
      <!--  end spinner -->

    </div>

  </div>


</wc-support-panel-scrollable-body>

<wc-arende-footer ng-if="config.intygContext.isSigned" config="config"></wc-arende-footer>
