<div class="row bottom-padding-small">
    <div class='col-xs-12'>

            <span class="bold valjkodverk" message key="common.sit.label.valj-version-icd-10"></span>
            <label class="radio-inline">
                <input type="radio" id="diagnoseKodverk_ICD_10_SE" name="diagnosKodSystem" value="ICD_10_SE"
                       ng-model="formState.diagnosKodSystem" checked="checked"
                       ng-change="onChangeKodverk()">
                <span message key="common.sit.label.diagnoskodverk.fullstandig"></span>
            </label>
            <label class="radio-inline">
                <input type="radio" id="diagnoseKodverk_KSH_97_P" name="diagnosKodSystem" value="KSH_97_P"
                       ng-model="formState.diagnosKodSystem" ng-change="onChangeKodverk()">
                <span message key="common.sit.label.diagnoskodverk.primarvard"></span>
            </label>

    </div>
</div>

<div class="row bottom-padding-small diagnosRow" ng-repeat="diagnos in model[options.key]">
    <div class='col-xs-4'>
        <label class="control-label unbreakable"><span dynamic-label key="{{to.diagnosKodLabel}}.RBK"></span></label>
        <span ng-if="to.help" wc-help-mark field-dynamic-help-text="{{to.diagnosKodLabel}}.HLP"></span>
        <div class="input-group">
            <span class="input-group-addon glyphicon glyphicon-remove-sign deleteDiagnos" ng-click="removeDiagnos($index)" ng-show="model[options.key].length > 1"></span>
            <input type="text" class="form-control" id="diagnoseCode" name="diagnose.code" value="" ng-blur="onBlurDiagnoseCodeField($index)"
                   class='diagnose-code col-xs-11 form-control' ng-model="diagnos.diagnosKod"
                   uib-typeahead="d.value as d.label for d in getDiagnoseCodes(formState.diagnosKodSystem, $viewValue) | limitTo:10"
                   typeahead-min-length="3" typeahead-on-select="onDiagnoseCodeSelect($index, $item)"
                   typeahead-template-url="/web/webjars/common/webcert/gui/formly/diagnos.formly.typeahead_template.html"
                   wc-to-uppercase>
        </div>
    </div>
    <div class='col-xs-8'>
        <label class="control-label"><span dynamic-label key="{{to.diagnosBeskrivningLabel}}.RBK"></span></label>
        <span ng-if="to.help" wc-help-mark field-dynamic-help-text="{{to.diagnosBeskrivningLabel}}.HLP"></span>
        <input type="text" class="form-control maxwidth" id="diagnoseDescription"
               class="col-xs-12 form-control" name="diagnose.description" value=""
               ng-model= "diagnos.diagnosBeskrivning"
               uib-typeahead="d.value as d.label for d in searchDiagnoseByDescription(formState.diagnosKodSystem, $viewValue)"
               typeahead-on-select="onDiagnoseDescriptionSelect($index, $item)"
               typeahead-template-url="/web/webjars/common/webcert/gui/formly/diagnos.formly.typeahead_template.html"
               typeahead-wait-ms="100">
    </div>
</div>

<div class="row bottom-padding-small" ng-show="model[options.key].length < 3">
    <div class="col-xs-12">
        <a href="" ng-click="addDiagnos()">Lägg till övriga diagnoser </a>
    </div>
</div>
