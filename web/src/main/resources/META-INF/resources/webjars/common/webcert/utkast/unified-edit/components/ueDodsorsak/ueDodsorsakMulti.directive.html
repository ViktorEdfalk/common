<div>
  <table class="dodsorsak-multi" style="width: 100%">
    <tr>
      <th style="width: 60%;"><span dynamic-label key="{{config.beskrivningLabel}}.RBK"></span> <span wc-help-chevron help-text-key="{{config.beskrivningLabel}}.HLP"></span>
        <span wc-help-chevron-text help-text-key="{{config.beskrivningLabel}}.HLP"></span>
      </th>
      <th class="date-width"><span dynamic-label key="{{config.datumLabel}}.RBK"></span> <span wc-help-chevron help-text-key="{{config.datumLabel}}.HLP"></span>
        <span wc-help-chevron-text help-text-key="{{config.datumLabel}}.HLP"></span></th>
      <th><span dynamic-label key="{{config.orsakLabel}}.RBK"></span> <span wc-help-chevron help-text-key="{{config.orsakLabel}}.HLP"></span>
        <span wc-help-chevron-text help-text-key="{{config.orsakLabel}}.HLP"></span>
      </th>
    </tr>
    <tr ng-repeat="orsak in model[config.modelProp] track by $index">
      <td>
        <input id="orsak-multi-{{$index}}-beskrivning"
               type="text"
               class="form-control input-full"
               ng-class="{'fielderror' : hasValidationError('beskrivning', $index)}"
               ng-model="orsak.beskrivning"
               ng-blur="validate()"
               maxlength="{{config.htmlMaxlength || 3500}}">
      </td>
      <td>
        <span wc-date-picker-field target-model="orsak.datum" dom-id="orsak-multi-{{$index}}-datum"
              ng-class="{'fielderror' : hasValidationError('datum', $index)}"
              ng-model="orsak.datum"
              on-blur="validate()"
              add-date-parser="loose"></span>
      </td>
      <td>
        <ui-select theme="bootstrap" search-enabled="false" ng-model="orsak.specifikation"
                   id="orsak-multi-{{$index}}-specifikation" name="andraDodsorsak-{{$index}}" append-config-body="true"
                   ng-class="{'fielderror' : hasValidationError('specifikation', $index)}"
                   on-select="validate()">
          <ui-select-match> <!--  placeholder="Välj..." -->
            <span ng-bind="$select.selected.label" title="{{$select.selected.label}}"></span>
          </ui-select-match>
          <ui-select-choices repeat="item.id as item in orsakOptions" value="$select.selected.id">
            <span ng-bind="item.label"></span>
          </ui-select-choices>
        </ui-select>
      </td>
      <td>
        <button type="button" ng-if="$index > 0" class="btn btn-default" ng-click="deleteRow($index)"><i class="glyphicon glyphicon-minus-sign"></i></button>
      </td>
    </tr>
  </table>
  <button type="button" ng-disabled="model[config.modelProp].length >= config.maxRows" class="btn btn-default" ng-click="addRow()"><i class="glyphicon glyphicon-plus-sign"></i> Lägg till sjukdom/skada</button>
  <wc-field-validation field-type="dodsorsak" validations="orsakValidations"></wc-field-validation>
</div>
