
<div ng-form="form2">
  <a id="anchor.intygbaseratpa" name="anchor.intygbaseratpa"></a>
    <h3 class="title">Läkarutlåtande för sjukersättning</h3>
  <div id="intygetbaseraspa" wc-field field-label="sjukersattning.label.intygbaseratpa" field-number="1" wc-detect-animation
                       field-help-text="sjukersattning.helptext.intyg-baserat-pa"
       field-has-errors="viewState.common.validationMessagesGrouped.intygbaseratpa" class="field-fade">
  <div class="alert alert-danger" ng-if="viewState.common.validationMessagesGrouped.intygbaseratpa" id="validationMessages_intygbaseratpa">
    <ul>
      <li ng-repeat="message in viewState.common.validationMessagesGrouped.intygbaseratpa"><span message
                                                                                key="{{message.message}}"></span>
      </li>
    </ul>
  </div>

  <!-- Undersökning -->
  <div class="form-group form-inline">
    <label class="checkbox inline-block" style="min-width: 300px"><input type="checkbox"
                                                                         id="basedOnExamination"
                                                                         name="informationBasedOn.examination"
                                                                         class="checkbox-inline"
                                                                         ng-model="basedOnState.check.undersokningAvPatienten"
                                                                         ng-change="toggleBaseradPaDate('undersokningAvPatienten')"
        value="true">
      Min undersökning av patienten</label>
    <span wc-date-picker-field target-model="dates.undersokningAvPatienten"
          dom-id="undersokningAvPatientenDate"></span>
  </div>

  <!-- Journaluppgifter -->
  <div class="form-group form-inline"><label class="checkbox inline-block" style="min-width: 300px"><input type="checkbox"
                                                                                                id="basedOnJournal"
                                                                                                name="informationBasedOn.journal"
                                                                                                ng-model="basedOnState.check.journaluppgifter"
                                                                                                ng-change="toggleBaseradPaDate('journaluppgifter')">
              Journaluppgifter från den</label>
    <span wc-date-picker-field target-model="dates.journaluppgifter"
          dom-id="journaluppgifterDate"></span>
  </div>

  <div class="form-group form-inline">
      <label class="checkbox inline-block" style="min-width: 300px"><input type="checkbox"
                                                                           id="basedOnTelefon"
                                                                           name="informationBasedOn.telefon"
                                                                           ng-model="basedOnState.check.telefonkontaktMedPatienten"
                                                                           ng-change="toggleBaseradPaDate('telefonkontaktMedPatienten')">
          Telefonkontakt med patienten</label>
    <span wc-date-picker-field target-model="dates.telefonkontaktMedPatienten"
          dom-id="telefonkontaktMedPatientenDate"></span>
  </div>

      <!--  Jag har känt patienten sedan den -->
  <div class="form-group form-inline">
      <label class="inline-block" style="min-width: 300px">
          Jag har känt patienten sedan den</label>
      <span wc-date-picker-field target-model="dates.kannedomOmPatient"
            dom-id="kannedomOmPatientDate"></span>
  </div>


      <!--  Finns det andra medicinska... -->
      <div class="form-group form-inline">
          <label class="inline-block bold">Finns det andra medicinska utredningar eller underlag som är relevanta för bedömningen?</label>
      </div>
      <div class="form-group form-inline">
          <label class="radio-inline">
                <input id="andraMedicinskaUtredningarYes" name="andraMedicinskaUtredningar" type="radio" ng-value="true"
                        ng-model="radioMedical.checked">Ja
          </label>
          <label class="radio-inline">
              <input id="andraMedicinskaUtredningarNo" name="andraMedicinskaUtredningar" type="radio" ng-value="false"
                     ng-model="radioMedical.checked" checked="checked">Nej
          </label>
      </div>
      <!-- outcomment this for prod  -->
      <!--div class="form-group"><button class="btn btn-default btn-success" ng-click="logOutModelConsole()">dump model</button></div>
      <div class="form-group"><button class="btn btn-default btn-success" ng-click="logOutViewState()">dump viewstate</button></div-->


        <!--select id="intygType" class="form-control" name="intygType" data-ng-model="intygType"
                data-ng-options="type.id as type.label for type in certTypes" wc-focus-me="focusFirstInput"></select-->

     <div class="form-group form-inline bottom-padding-small" ng-show="radioMedical.checked">
         <div class="underlagItem" style="padding-bottom: 30px;" ng-repeat="(underlagIndex, underlag) in additionalSupplements">
                <span> {{ $index + 1   }}</span>
              <select class="form-control" name="andraUnderlag"
                    data-ng-model="underlag.selectedType" ng-change="onUnderlagChange(underlag)"
                    data-ng-options="item.id as item.label for item in $parent.underlagSelect"></select>

              <span wc-date-picker-field target-model="underlag.dateCreated" dom-id="{{ underlag.id }}-Date"
                    ng-change="onUnderlagChange(underlag)" ng-model="underlag.dateCreated"></span>

              <div class="willSupplyWrapper pull-right">
              <label class="control-label inline-block bold" style="padding-right: 10px;">Bifogas </label>
              <label class="radio-inline">
                  <input id="willSupplyAttachmentYES-{{ underlag.id }}" name="willSupplyAttachmentRadioYes{{ underlag.id }}"
                         type="radio" ng-value="true" ng-change="onUnderlagChange(underlag)" ng-model="underlag.willSupplyAttachment">Ja
              </label>
              <label class="radio-inline">
                  <input id="willSupplyAttachmentNO-{{ underlag.id }}" name="willSupplyAttachmentRadioNo{{ underlag.id }}"
                         type="radio" ng-value="false" ng-change="onUnderlagChange(underlag)" ng-model="underlag.willSupplyAttachment" checked="checked">Nej
              </label>

              </div>
             <br/>
<!-- todo: these hard coded numbers should be replaced and places in valiation secton of viewmodel... -->
             <div class="col-xs-12" style="padding: 5px 0;" ng-show="underlag.isLatest && underlag.selectedOrder < 9">
                 <a href ng-click="createUnderlag(underlag.selectedOrder)">Lägg till ytterligare underlag</a>

             </div>
             <span ng-if="underlag.selectedOrder === 9">You have reached to maximum of 10 selected underlag...</span>
         </div>



      </div>



  </div>
</div>