
<div ng-form="form2">
  <a id="anchor.intygbaseratpa" name="anchor.intygbaseratpa"></a>
    <h3 class="title">Läkarutlåtande för sjukersättning</h3>
  <div id="intygetbaseraspa" wc-field field-label="sjukersattning.label.intygbaseratpa" wc-detect-animation
                       field-help-text="sjukersattning.helptext.intyg-baserat-pa"
       field-has-errors="viewState.common.validationMessagesGrouped.intygbaseratpa" class="field-fade">
  <div class="alert alert-danger" ng-if="viewState.common.validationMessagesGrouped.intygbaseratpa" id="validationMessages_intygbaseratpa">
    <ul>
      <li ng-repeat="message in viewState.common.validationMessagesGrouped.intygbaseratpa"><span message
                                                                                key="{{message.message}}"></span>
      </li>
    </ul>
  </div>

  <!-- Undersökning -->
  <div class="form-group form-inline">
    <label class="checkbox inline-block" style="min-width: 300px"><input  type="checkbox"
                                                             id="basedOnExamination"
                                                             name="informationBasedOn.examination"
                                                             class="checkbox-inline"
                                                             ng-model="basedOnState.check.undersokningAvPatienten"
                                                             ng-change="toggleBaseradPaDate('undersokningAvPatienten')"
                                                             value="true">
      Min undersökning av patienten</label>
    <span wc-date-picker-field target-model="dates.undersokningAvPatienten"
          dom-id="undersokningAvPatientenDate"></span>
  </div>

  <!-- Journaluppgifter -->
  <div class="form-group form-inline"><label class="checkbox inline-block" style="min-width: 300px"><input type="checkbox"
                                                                                                id="basedOnJournal"
                                                                                                name="informationBasedOn.journal"
                                                                                                ng-model="basedOnState.check.journaluppgifter"
                                                                                                ng-change="toggleBaseradPaDate('journaluppgifter')">
              Journaluppgifter från den</label>
    <span wc-date-picker-field target-model="dates.journaluppgifter"
          dom-id="journaluppgifterDate"></span>
  </div>

  <div class="form-group form-inline">
      <label class="checkbox inline-block" style="min-width: 300px"><input type="checkbox"
                                                                           id="basedOnTelefon"
                                                                           name="informationBasedOn.telefon"
                                                                           ng-model="basedOnState.check.telefonkontaktMedPatienten"
                                                                           ng-change="toggleBaseradPaDate('telefonkontaktMedPatienten')">
          Telefonkontakt med patienten</label>
    <span wc-date-picker-field target-model="dates.telefonkontaktMedPatienten"
          dom-id="telefonkontaktMedPatientenDate"></span>
  </div>

      <!--  Jag har känt patienten sedan den -->

      <div class="alert alert-danger" ng-if="viewState.common.validationMessagesGrouped.kannedom"
           id="validationMessages_kannedom">
          <ul>
              <li ng-repeat="message in viewState.common.validationMessagesGrouped.kannedom">
                  <span message key="{{message.message}}"></span>
              </li>
          </ul>
      </div>
  <div class="form-group form-inline">
      <label class="checkbox inline-block" style="min-width: 300px; "><input type="checkbox"
                                                                           id="basedOnKannedom"
                                                                           name="informationBasedOn.kannedom"
                                                                           ng-model="basedOnState.check.kannedomOmPatient"
                                                                           ng-change="toggleBaseradPaDate('kannedomOmPatient')" />
          <span>Jag har känt patienten sedan den</span></label>
      <span wc-date-picker-field target-model="dates.kannedomOmPatient" dom-id="kannedomOmPatientDate"></span>


  </div>
      <p>

      <!--  Finns det andra medicinska... -->
      <div class="form-group form-inline">
          <label class="inline-block bold">Finns det andra medicinska utredningar eller underlag som är relevanta för bedömningen?</label>
      </div>
      <div class="form-group form-inline">
          <label class="radio-inline">
                <input id="andraMedicinskaUtredningarYes" name="andraMedicinskaUtredningar" type="radio" ng-value="true"
                        ng-model="viewModel.radioMedicalChecked" />Ja
          </label>
          <label class="radio-inline">
              <input id="andraMedicinskaUtredningarNo" name="andraMedicinskaUtredningar" type="radio" ng-value="false"
                     ng-model="viewModel.radioMedicalChecked" checked="checked" />Nej
          </label>
      </div>

     <div class="form-group form-inline bottom-padding-small" ng-show="viewModel.radioMedicalChecked"  style="padding-bottom: 40px;">
         <div class="underlagItem" style="padding-bottom: 10px;" ng-repeat="underlag in viewModel.initialUnderlag">
              <span class="glyphicon glyphicon-remove-sign deleteUnderlag" ng-click="removeUnderlag(underlag.typ, $index)"></span>
              <select class="form-control" name="andraUnderlag"
                    data-ng-model="underlag.typ" ng-change="onUnderlagChange(underlag, $index)"
                    data-ng-options="item.id as item.label for item in $parent.underlagSelect"></select>

              <span wc-date-picker-field target-model="underlag.datum" dom-id="{{ underlag.typ }}-Date"
                    ng-change="onUnderlagChange(underlag, $index)" ng-model="underlag.datum"></span>

              <div class="willSupplyWrapper pull-right">
              <label class="control-label inline-block bold" style="padding-right: 10px;">Skickas separat</label>
              <label class="radio-inline">
                  <input id="willSupplyAttachmentYES-{{ $index }}" name="willSupplyAttachmentRadioYes{{ $index }}"
                         type="radio" ng-value="true" ng-change="onUnderlagChange(underlag, $index)" ng-model="underlag.bilaga" />Ja
              </label>
              <label class="radio-inline">
                  <input id="willSupplyAttachmentNO-{{ $index }}" name="willSupplyAttachmentRadioNo{{ $index }}"
                         type="radio" ng-value="false" ng-change="onUnderlagChange(underlag, $index)" ng-model="underlag.bilaga" />Nej
              </label>
          </div>
             <br/>
         </div>
         <div class="col-xs-12" style="padding: 5px 0px;background-color: #e5e5e5; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;"
              ng-show="model.underlag.length < 9">
             <a href ng-click="createUnderlag()" class="btn btn-link"
                ng-class="{ 'disabled': viewModel.initialUnderlag[viewModel.initialUnderlag.length - 1].typ === 0 ||
                                        viewModel.initialUnderlag[viewModel.initialUnderlag.length - 1].datum === null }">
                 Lägg till ytterligare underlag</a>
         </div>
         <span ng-if="model.underlag.length === 9" message key="sjukersattning.validation.underlag.max-extra-underlag"></span><!-- kursivera -->
     </div>



  </div>
</div>