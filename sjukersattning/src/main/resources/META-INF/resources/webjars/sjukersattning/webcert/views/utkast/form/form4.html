<div ng-form="form4">
  <a id="anchor.diagnos" name="anchor.diagnos"></a>
  <div wc-field field-label="sjukpenning.label.diagnos" field-number="4" wc-detect-animation
     field-help-text="sjukpenning.helptext.diagnos" ng-hide="viewState.avstangningSmittskydd()"
     class="print-pagebreak-after field-fade" field-has-errors="viewState.common.validationMessagesGrouped.diagnos" id="diagnoseForm">

  <div class="alert alert-danger" ng-if="viewState.common.validationMessagesGrouped.diagnos" id="validationMessages_diagnos">
    <ul>
      <li ng-repeat="message in viewState.common.validationMessagesGrouped.diagnos"><span message
                                                                         key="{{message.message}}"></span>
      </li>
    </ul>
  </div>
  <div class="row bottom-padding-small">
    <div class='col-xs-3'>
      <input type="hidden" id="diagnoseKodverk_ICD_10_SE" name="diagnosKodverk" value="ICD_10_SE" ng-model="model.diagnosKodsystem1" />
      <label class="control-label unbreakable">ICD-10-SE</label>
      <input type="text" class="form-control" id="diagnoseCode" name="diagnose.code" value=""
             class='diagnose-code col-xs-11 form-control' ng-model="model.diagnosKod1"
             typeahead="d.value as d.label for d in getDiagnoseCodes(model.diagnosKodsystem1, $viewValue) | filter:$viewValue | limitTo:10"
             typeahead-min-length="3" typeahead-on-select="onDiagnoseCode1Select($item)"
             typeahead-template-url="/web/webjars/sjukpenning/webcert/views/utkast/form/form4.diagnoseTemplate.html"
             wc-to-uppercase
          >
    </div>
    <div class='col-xs-9'>
      <label class="control-label">Diagnos</label>
      <input type="text" class="form-control maxwidth" id="diagnoseDescription"
             class="col-xs-12 form-control" name="diagnose.description" value=""
             ng-model="model.diagnosBeskrivning1"
             typeahead="d.value as d.label for d in searchDiagnoseByDescription(model.diagnosKodsystem1, $viewValue) | filter:$viewValue "
             typeahead-on-select="onDiagnoseDescription1Select($item)"
             typeahead-template-url="/web/webjars/sjukpenning/webcert/views/utkast/form/form4.diagnoseTemplate.html"
             typeahead-wait-ms="100" ng-change="limitDiagnosBeskrivningField('diagnosBeskrivning1')">
    </div>
  </div>
  <div class="row bottom-padding-tiny">
    <div class='col-xs-3'>
      <label class="control-label unbreakable">ICD-10-SE</label>
      <div class="controls">
        <div class="bottom-padding-small clearfix">
          <input type="text" id="diagnoseCodeOpt1" name="diagnose.codeOpt1" value=""
                 ng-model="model.diagnosKod2" class="col-xs-11 form-control"
                 typeahead="d.value as d.label for d in getDiagnoseCodes(model.diagnosKodsystem1, $viewValue) | filter:$viewValue | limitTo:10"
                 typeahead-min-length="3" typeahead-on-select="onDiagnoseCode2Select($item)"
                 typeahead-template-url="/web/webjars/sjukpenning/webcert/views/utkast/form/form4.diagnoseTemplate.html"
                 ng-change="limitDiagnosBeskrivningField('diagnosKod2')" wc-to-uppercase>
        </div>
      </div>
    </div>
    <div class='col-xs-9'>
      <label class="control-label inline-block"><span message
                                                      key="sjukpenning.label.ytterligarediagnoser"></span>
        </label><span wc-enable-tooltip class="absolute"
                                  field-help-text="sjukpenning.helptext.diagnos.ytterligare"></span>
      <div class="bottom-padding-small clearfix">
        <input type="text" id="diagnoseDescriptionOpt1" name="diagnose.descriptionOpt1" value=""
               ng-model="model.diagnosBeskrivning2" class="block col-xs-12 form-control maxwidth"
               typeahead="d.value as d.label for d in searchDiagnoseByDescription(model.diagnosKodsystem1, $viewValue) | filter:$viewValue "
               typeahead-on-select="onDiagnoseDescription2Select($item)"
               typeahead-template-url="/web/webjars/sjukpenning/webcert/views/utkast/form/form4.diagnoseTemplate.html"
               typeahead-wait-ms="100" ng-change="limitDiagnosBeskrivningField('diagnosBeskrivning2')">
      </div>
    </div>
  </div>
  <div class="row bottom-padding-small">
    <div class='col-xs-3'>
      <input type="text" id="diagnoseCodeOpt2" name="diagnose.codeOpt2" value=""
             ng-model="model.diagnosKod3" class="col-xs-11 form-control"
             typeahead="d.value as d.label for d in getDiagnoseCodes(model.diagnosKodsystem1, $viewValue) | filter:$viewValue | limitTo:10"
             typeahead-min-length="3" typeahead-on-select="onDiagnoseCode3Select($item)"
             typeahead-template-url="/web/webjars/sjukpenning/webcert/views/utkast/form/form4.diagnoseTemplate.html"
             ng-change="limitDiagnosBeskrivningField('diagnosKod3')" wc-to-uppercase>
    </div>
    <div class='col-xs-9'>
      <div class="controls">
        <input type="text" id="diagnoseDescriptionOpt2" name="diagnose.descriptionOpt2" value=""
               ng-model="model.diagnosBeskrivning3" class="block col-xs-12 form-control maxwidth"
               typeahead="d.value as d.label for d in searchDiagnoseByDescription(model.diagnosKodsystem1, $viewValue) | filter:$viewValue "
               typeahead-on-select="onDiagnoseDescription3Select($item)"
               typeahead-template-url="/web/webjars/sjukpenning/webcert/views/utkast/form/form4.diagnoseTemplate.html"
               typeahead-wait-ms="100"
               ng-change="limitDiagnosBeskrivningField('diagnosBeskrivning3')">
      </div>
    </div>
  </div>

</div>

</div>